{"ast":null,"code":"import res from 'express/lib/response';\nexport default class TweetService {\n  // tweets = [\n  //   {\n  //     id: 1,\n  //     text: '드림코딩에서 강의 들으면 너무 좋으다',\n  //     createdAt: '2021-05-09T04:20:57.000Z',\n  //     name: 'Bob',\n  //     username: 'bob',\n  //     url: 'https://www.pngall.com/wp-content/uploads/12/Avatar-Profile.png',\n  //   },\n  // ];\n  constructor(baseURL) {\n    this.baseURL = baseURL;\n  }\n\n  async getTweets(username) {\n    const query = username ? `?username=${username}` : '';\n    const response = await fetch(`${this.baseURL}/tweets${query}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = response.json();\n\n    if (response.status !== 200) {\n      throw new Error(data.message);\n    }\n\n    return data;\n  }\n\n  async postTweet(text) {\n    const response = await fetch(`${this.baseURL}/tweets`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        text,\n        username: 'ellie',\n        name: 'ellie'\n      })\n    });\n    const data = response.json();\n\n    if (response.status !== 201) {\n      throw new Error(data.message);\n    }\n\n    return data;\n  }\n\n  async deleteTweet(tweetId) {\n    this.tweets = this.tweets.filter(tweet => tweet.id !== tweetId);\n  }\n\n  async updateTweet(tweetId, text) {\n    const tweet = this.tweets.find(tweet => tweet.id === tweetId);\n\n    if (!tweet) {\n      throw new Error('tweet not found!');\n    }\n\n    tweet.text = text;\n    return tweet;\n  }\n\n}","map":{"version":3,"sources":["/Users/woo/projects/dwitter/client/src/service/tweet.js"],"names":["res","TweetService","constructor","baseURL","getTweets","username","query","response","fetch","method","headers","data","json","status","Error","message","postTweet","text","body","JSON","stringify","name","deleteTweet","tweetId","tweets","filter","tweet","id","updateTweet","find"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,sBAAhB;AAEA,eAAe,MAAMC,YAAN,CAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,SAAKA,OAAL,GAAeA,OAAf;AACD;;AAEc,QAATC,SAAS,CAACC,QAAD,EAAW;AACxB,UAAMC,KAAK,GAAGD,QAAQ,GAAI,aAAYA,QAAS,EAAzB,GAA6B,EAAnD;AACA,UAAME,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAE,KAAKL,OAAQ,UAASG,KAAM,EAAhC,EAAmC;AAC7DG,MAAAA,MAAM,EAAE,KADqD;AAE7DC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAFoD,KAAnC,CAA5B;AAKA,UAAMC,IAAI,GAAGJ,QAAQ,CAACK,IAAT,EAAb;;AACA,QAAIL,QAAQ,CAACM,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAM,IAAIC,KAAJ,CAAUH,IAAI,CAACI,OAAf,CAAN;AACD;;AACD,WAAOJ,IAAP;AACD;;AAEc,QAATK,SAAS,CAACC,IAAD,EAAO;AACpB,UAAMV,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAE,KAAKL,OAAQ,SAAjB,EAA2B;AACrDM,MAAAA,MAAM,EAAE,MAD6C;AAErDC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAF4C;AAGrDQ,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEH,QAAAA,IAAF;AAAQZ,QAAAA,QAAQ,EAAE,OAAlB;AAA2BgB,QAAAA,IAAI,EAAE;AAAjC,OAAf;AAH+C,KAA3B,CAA5B;AAMA,UAAMV,IAAI,GAAGJ,QAAQ,CAACK,IAAT,EAAb;;AACA,QAAIL,QAAQ,CAACM,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAM,IAAIC,KAAJ,CAAUH,IAAI,CAACI,OAAf,CAAN;AACD;;AACD,WAAOJ,IAAP;AACD;;AAEgB,QAAXW,WAAW,CAACC,OAAD,EAAU;AACzB,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,MAAZ,CAAoBC,KAAD,IAAWA,KAAK,CAACC,EAAN,KAAaJ,OAA3C,CAAd;AACD;;AAEgB,QAAXK,WAAW,CAACL,OAAD,EAAUN,IAAV,EAAgB;AAC/B,UAAMS,KAAK,GAAG,KAAKF,MAAL,CAAYK,IAAZ,CAAkBH,KAAD,IAAWA,KAAK,CAACC,EAAN,KAAaJ,OAAzC,CAAd;;AACA,QAAI,CAACG,KAAL,EAAY;AACV,YAAM,IAAIZ,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACDY,IAAAA,KAAK,CAACT,IAAN,GAAaA,IAAb;AACA,WAAOS,KAAP;AACD;;AAvD+B","sourcesContent":["import res from 'express/lib/response';\n\nexport default class TweetService {\n  // tweets = [\n  //   {\n  //     id: 1,\n  //     text: '드림코딩에서 강의 들으면 너무 좋으다',\n  //     createdAt: '2021-05-09T04:20:57.000Z',\n  //     name: 'Bob',\n  //     username: 'bob',\n  //     url: 'https://www.pngall.com/wp-content/uploads/12/Avatar-Profile.png',\n  //   },\n  // ];\n\n  constructor(baseURL) {\n    this.baseURL = baseURL;\n  }\n\n  async getTweets(username) {\n    const query = username ? `?username=${username}` : '';\n    const response = await fetch(`${this.baseURL}/tweets${query}`, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    const data = response.json();\n    if (response.status !== 200) {\n      throw new Error(data.message);\n    }\n    return data;\n  }\n\n  async postTweet(text) {\n    const response = await fetch(`${this.baseURL}/tweets`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ text, username: 'ellie', name: 'ellie' }),\n    });\n\n    const data = response.json();\n    if (response.status !== 201) {\n      throw new Error(data.message);\n    }\n    return data;\n  }\n\n  async deleteTweet(tweetId) {\n    this.tweets = this.tweets.filter((tweet) => tweet.id !== tweetId);\n  }\n\n  async updateTweet(tweetId, text) {\n    const tweet = this.tweets.find((tweet) => tweet.id === tweetId);\n    if (!tweet) {\n      throw new Error('tweet not found!');\n    }\n    tweet.text = text;\n    return tweet;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}